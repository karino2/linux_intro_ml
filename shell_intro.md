---
title: "環境設定のためのシェル入門"
layout: page
---

機械学習屋は通常のシスアドほどはシェルに詳しい必要はありません。
ですがコンテナとインスタンスの設定は凄くしょっちゅうやる事になるので、
簡単なトラブルシューティングは自分で出来る方が良いです。

ここではそうした事を踏まえて、機械学習で必要な程度のシェルの入門をしたいと思います。


# いろいろなクオートと変数の展開

シェルの文字列のクオートには、シングルクオートとダブルクオートとバッククオートの三種類があり、それぞれ意味が違います。

### echoに見る、クオートが無い場合とある場合の違い

echoで、「Hello  World」と、間に空白を二つ入れたいとします。
以下のようにすると、

```
$ echo Hello  World
Hello World
```

空白が一つになってしまいます。

echoコマンドからは、`echo Hello  World`というのは、

- 第一引数としてHello
- 第二引数としてWorld

が渡されている、と見えて、間の空白というのはシェルが処理する事になります。

シェルは空白で区切って最初の文字列をコマンド、それ以降を引数として配列に詰めて渡します。
この時、間の空白が幾つかとかはシェルは気にしません。そしてechoまで辿り着いた時には、間の空白が二つあったという情報は失われます。

では空白を二つ挟んだ結果を出したい場合はどうしたらいいでしょう？
ダブルクオートで囲むのが普通の解決策です。

```
$ echo "Hello  World"
```

こうすると、echoからは第一引数に「Hello  World」が渡された、と見えます。
引数は一つと解釈されます。これはechoというよりはシェルの振る舞いなのでそのほかのコマンドでも同じ事が言えます。（あとでシェルスクリプトをやった時にさらに確認します）


### シェルの変数

シェルには変数という物があります。
変数はイコールで代入する事で作られます。
例えば以下でHOGEという変数が出来ます。

```
HOGE=abc
```

これでHOGEという変数にabcという文字列が入ります。

変数は参照する時はドル記号をつけます。例えばechoを使うと、以下のようになります。

```
$ echo $HOGE
abc
```

シェルは、`$HOGE`とあったら変数の中身に置き換えてechoに渡します。
echoコマンドからはHOGEという変数だったという事実は分からず、abcという文字列が最初から渡されたのと区別出来ません。

### シングルクオートとダブルクオートと変数展開

文字列をダブルクオートで囲むと、中に変数があった場合、それが展開されます。

```
$ echo "ika$HOGE"
ikaabc
```

ですが、以下のようにすると、何も表示されません。

```
$ echo "$HOGEika"

```

これは、`$HOGE`という変数のあとにikaがあるのではなく、`$HOGEika`という別の変数があると勘違いする為です。

HOGEで切りたい場合は中括弧でくくります。

```
$ echo "${HOGE}ika"
abcika
```

シェルでは、文字列をシングルクオートでくくる事も出来ます。
シングルクオートの場合、中の変数は展開されません。

```
$ echo '${HOGE}ika'
${HOGE}ika
```

### バッククオートと`$()`


# 環境変数入門

環境変数とは何か、とか、子プロセスがどうなるか、とか。
.bashrcとかの話もここでしておくか？

### モードとかユーザーとか

chownとかchmodとかwo am iとかユーザーとか。
コンテナ上でルートで作業した時にvmountしているファイルのパミッションが変わる話とかをする。
xargsとか使って一気にchmodしたり。

4. Managing files and foldersに一通りの話があるので補足する感じで。


# シェルスクリプト入門

本当に入門だけ。なるべくJupyter上でやろう。
